# 小学生向け学習練習アプリ - 統合仕様書

## 概要

小学生（1～3年生想定）が複数の学習アプリ（九九・四則演算など）で計算練習できるポータル型Webアプリケーションです。
現在は「九九練習」「四則演算練習」を提供し、将来的にアプリを追加可能な構成にしています。
**PWA対応**により、スマートフォンのホーム画面にインストールしてアプリのように利用できます。
**レスポンシブデザイン**で、PC・タブレット・スマートフォン全端末に対応します。

## 基本情報

| 項目 | 内容 |
|------|------|
| **プロジェクト名** | 学習練習アプリ（ポータル＋各学習） |
| **対象ユーザー** | 小学1～3年生 |
| **学習内容** | 九九（1×1～9×9）、四則演算（たし算・ひき算・かけ算・わり算） |
| **対応端末** | PC、タブレット、スマートフォン（レスポンシブ） |
| **主な特徴** | PWA対応、オフライン動作、クライアント中心設計 |

## アプリ一覧と対象

| アプリID | 名前 | 対象学年 | 概要 |
|---|---|---|---|
| `kuku` | 九九練習 | 小学1～3年生 | 1×1～9×9の九九を練習（段選択、じゅんばん/ランダム出題、正答率表示） |
| `shisoku` | 四則演算 | 小学1～3年生 | たし算・ひき算・かけ算・わり算（難易度：かんたん/むずかしい、範囲設定、余り入力） |

## アプリケーションの流れ（全体）

```
1. ポータル画面を表示
   ↓
2. アプリ選択（九九 / 四則演算 等）
   ↓
3. 各アプリの設定（九九＝段/出題方式、四則演算＝演算/難易度/範囲）
   ↓
4. 出題（クライアント側で問題生成・採点）
   ↓
5. 結果表示（正答率・履歴・再挑戦/設定変更/ポータルへ）
```

### 個別フロー（例）

- 九九（`kuku`）
  - 段選択 → 出題方式選択（じゅんばん/ランダム）→ 出題 → 結果表示
- 四則演算（`shisoku`）
  - 演算選択（＋/−/×/÷）→ 難易度選択（かんたん/むずかしい）→ 範囲設定（1桁/上限値指定）→ 出題 → 結果表示

## 詳細仕様

詳細は以下のドキュメントを参照してください：

### フロントエンド・UI設計
- [01_requirements.md](01_requirements.md) - 要件定義
- [02_screen_design.md](02_screen_design.md) - 画面設計
- [03_functional_requirements.md](03_functional_requirements.md) - 機能仕様

### 技術・アーキテクチャ設計
- [04_technical_design.md](04_technical_design.md) - フロントエンド技術設計（HTML/CSS/JavaScript、クライアント中心設計）
- [05_user_flow.md](05_user_flow.md) - ユースケース・画面遷移図
- [06_server_architecture.md](06_server_architecture.md) - サーバーアーキテクチャ・バックエンド設計（Flask + SQLite）

### デプロイ・運用
- [07_deployment_guide.md](07_deployment_guide.md) - 構築・デプロイ手順書

## デプロイ環境

| 項目 | 仕様 |
|------|------|
| **ホスティング** | Lolipop! レンタルサーバー（ハイスピードプラン） |
| **Webサーバー** | Nginx + LiteSpeed |
| **バックエンド** | Python 3.7 + Flask 2.2.5 |
| **データベース** | SQLite 3（内蔵） |
| **フロントエンド** | HTML5 + CSS3 + JavaScript (Vanilla) + PWA |
| **アーキテクチャ** | Blueprint化した modular Flask アプリケーション |

## 設計方針・主要特徴

### フロントエンド
- **PWA対応**: Service Worker + Web App Manifest でホーム画面インストール可能
- **レスポンシブ**: モバイル・タブレット・デスクトップ全対応
- **オフライン**: キャッシング戦略により基本機能はオフライン利用可能
- **クライアント中心**: 問題生成・採点・正答率計算をクライアント側で実施（サーバー呼び出しはセッション作成/結果保存のみ）

### バックエンド
- **Blueprintベース**: 各学習アプリは独立Blueprint（`app/portal`、`app/kuku`、`app/shisoku`、`app/common`）
- **SQLite連携**: 必要に応じてセッション・結果保存（将来的な成績管理拡張に対応）
- **CGI/WSGI運用**: `index.cgi` → `wsgi_app.py`（Lolipop! のCGI環境向け設定。`SCRIPT_NAME`/`APPLICATION_ROOT` 調整）

## 今後の拡張性

- 新しい練習アプリを容易に追加可能（`app/<new_app>/` を作成し Blueprint 登録）
- 共通モジュール（DB・ユーティリティ・エラーハンドラ）でコード重複を最小化
- 成績管理・ランキング等への拡張が容易（結果保存の仕組みを活用）

---

最終更新: 2025-12-21# 小学生向け九九練習アプリ - 統合仕様書

## 概要

小学生（1～3年生想定）が九九（1×1～9×9）の計算を練習するためのWebアプリケーション。
**PWA対応**により、スマートフォンのホーム画面にインストールして、アプリのように利用できます。
**レスポンシブデザイン**で、PC・タブレット・スマートフォン全端末に対応。

## 基本情報

| 項目 | 内容 |
|------|------|
| **プロジェクト名** | 九九練習アプリ |
| **対象ユーザー** | 小学1～3年生 |
| **学習内容** | 九九（1×1～9×9） |
| **対応端末** | PC、タブレット、スマートフォン（レスポンシブ） |
| **主な特徴** | PWA対応でホーム画面インストール可能、オフライン対応 |

## アプリケーションの流れ

```
1. スタート画面
   ↓
2. 段選択画面（複数選択可能：1の段～9の段）
   ↓
3. 出題方式選択画面（じゅんばん出題 OR ランダム出題）
   ↓
4. 出題画面（選択した段から順序またはランダムに出題）
   ↓
5. 正答率表示画面（結果表示 + 最初に戻る / もう一度同じ練習）
```

## 詳細仕様

詳細は以下のドキュメントを参照してください：

### フロントエンド・UI設計
- [01_requirements.md](01_requirements.md) - 要件定義
- [02_screen_design.md](02_screen_design.md) - 画面設計
- [03_functional_requirements.md](03_functional_requirements.md) - 機能仕様

### 技術・アーキテクチャ設計
- [04_technical_design.md](04_technical_design.md) - フロントエンド技術設計（HTML/CSS/JavaScript + API連携）
- [05_user_flow.md](05_user_flow.md) - ユースケース・画面遷移図
- [06_server_architecture.md](06_server_architecture.md) - サーバーアーキテクチャ・バックエンド設計（Flask + SQLite）

### デプロイ・運用
- [07_deployment_guide.md](07_deployment_guide.md) - 構築・デプロイ手順書

## デプロイ環境

| 項目 | 仕様 |
|------|------|
| **ホスティング** | Lolipop! レンタルサーバー（ハイスピードプラン） |
| **Webサーバー** | Nginx + LiteSpeed |
| **バックエンド** | Python 3.7 + Flask 2.2.5 |
| **データベース** | SQLite 3（内蔵） |
| **フロントエンド** | HTML5 + CSS3 + JavaScript (Vanilla) + PWA |
| **アーキテクチャ** | Blueprint化した modular Flask アプリケーション |

## 主要特徴

### フロントエンド
- **PWA対応**: Service Worker + Web App Manifestでホーム画面インストール可能
- **レスポンシブデザイン**: モバイル・タブレット・デスクトップ全対応
- **オフライン対応**: キャッシング戦略により基本機能はオフライン利用可能
- クライアント側でほぼすべての処理が完結
- 軽量で高速（外部フレームワーク不要）

### バックエンド
- **Blueprintベースの設計**: 将来のアプリ追加を考慮
- **モジュール化**: 各アプリが独立したフォルダ構成
- **REST API**: JSON形式でフロントエンドと通信
- **SQLite連携**: セッション・回答履歴の永続化

### 今後の拡張性
- 新しい練習アプリ（割り算、足し算など）を簡単に追加可能
- 共通モジュール（認証、バリデーション、ユーティリティ）でコード重複を最小化
- 成績管理機能への移行が容易な設計
